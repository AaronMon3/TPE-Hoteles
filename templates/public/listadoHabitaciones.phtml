<?php
$title = 'Listado de Habitaciones';
require __DIR__ . '/../header.phtml';
?>

    <h1>Habitaciones</h1>

    <?php if (!empty($habitaciones)): ?>
        <table border="1" cellpadding="6" style="border-collapse:collapse; width:100%;">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Número</th>
                    <th>Precio</th>
                    <th>Tipo</th>
                    <th>Hotel</th>
                    <th>Imagen</th>
                    <th>Detalle</th>
                </tr>
            </thead>
            <tbody>
            <?php foreach ($habitaciones as $h): ?>
                <?php $img = $h['imagen_url'] ?? ''; ?>
                <tr>
                    <td><?= (int)$h['id_habitacion'] ?></td>
                    <td><?= htmlspecialchars($h['numero']) ?></td>
                    <td>$<?= htmlspecialchars($h['precio']) ?></td>
                    <td><?= htmlspecialchars($h['tipo_nombre'] ?? 'Desconocido') ?></td>
                    <td><?= htmlspecialchars($h['hotel_nombre'] ?? 'Desconocido') ?></td>
                    <td>
                        <?php if ($img): ?>
                            <img src="<?= htmlspecialchars($img) ?>" alt="<?= htmlspecialchars($h['tipo_nombre'] ?? '') ?>" style="max-width:120px; height:auto">
                        <?php else: ?>
                            —
                        <?php endif; ?>
                    </td>
                    <td><a href="<?= url('habitaciones/' . (int)$h['id_habitacion']) ?>">Ver</a></td>
                </tr>
            <?php endforeach; ?>
            </tbody>
        </table>
    <?php else: ?>
        <p>No hay habitaciones cargadas.</p>
    <?php endif; ?>
