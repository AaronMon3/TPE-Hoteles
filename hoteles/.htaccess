RewriteEngine On
Options -Indexes

# Configuración base
RewriteBase /hoteles/

# Permitir acceso directo a archivos y carpetas que existen (como imágenes)
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# Admin URLs
RewriteRule ^admin/login/?$ index.php?controller=admin&action=login [L,QSA]
RewriteRule ^admin/logout/?$ index.php?controller=admin&action=logout [L,QSA]
RewriteRule ^admin/dashboard/?$ index.php?controller=admin&action=dashboard [L,QSA]

# Admin - Habitaciones
RewriteRule ^admin/habitaciones/?$ index.php?controller=admin&action=listaHabitaciones [L,QSA]
RewriteRule ^admin/habitaciones/nueva/?$ index.php?controller=admin&action=formHabitacion [L,QSA]
RewriteRule ^admin/habitaciones/editar/([0-9]+)/?$ index.php?controller=admin&action=formHabitacion&id=$1 [L,QSA]
RewriteRule ^admin/habitaciones/eliminar/([0-9]+)/?$ index.php?controller=admin&action=eliminarHabitacion&id=$1 [L,QSA]

# Admin - Tipos de Habitación
RewriteRule ^admin/tipos/?$ index.php?controller=admin&action=listaTipos [L,QSA]
RewriteRule ^admin/tipos/nuevo/?$ index.php?controller=admin&action=formTipo [L,QSA]
RewriteRule ^admin/tipos/editar/([0-9]+)/?$ index.php?controller=admin&action=formTipo&id=$1 [L,QSA]
RewriteRule ^admin/tipos/eliminar/([0-9]+)/?$ index.php?controller=admin&action=eliminarTipo&id=$1 [L,QSA]

# URLs Públicas
RewriteRule ^habitaciones/?$ index.php?controller=habitacion&action=listar [L,QSA]
RewriteRule ^habitaciones/([0-9]+)/?$ index.php?controller=habitacion&action=detalle&id=$1 [L,QSA]
RewriteRule ^tipos/?$ index.php?controller=tipoHabitacion&action=listar [L,QSA]
RewriteRule ^tipos/([0-9]+)/?$ index.php?controller=habitacion&action=porTipo&id_tipo=$1 [L,QSA]

# Ruta por defecto
RewriteRule ^$ index.php?controller=habitacion&action=listar [L,QSA]

# Proteger archivos
<FilesMatch "^(config\.php|\.htaccess|.*\.sql)$">
    Order deny,allow
    Deny from all
</FilesMatch>
